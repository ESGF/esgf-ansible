
- name: stop httpd
  service:
    name: httpd
    state: stopped

- name: stop tomcat
  command: "{{ tomcat_ctrl }} stop"
  ignore_errors: yes

- name: stop postgres
  service:
    name: postgresql
    state: stopped

- name: stop cog
  when: "'index' in group_names"
  command: "{{ cog.wsgi_dir }}/apachectl stop"

- name: stop solr
  when: "'index' in group_names"
  become: yes
  become_user: solr
  command: "{{ solr.path }}/bin/solr stop -all"

- name: stop myproxy-server
  when: "'idp' in group_names"
  service:
    name: myproxy-server
    state: stopped
  ignore_errors: yes

- name: stop slcs
  when: "'idp' in group_names"
  command: "{{ slcs.wsgi_dir }}/apachectl stop"

- name: stop dashboard information provider
  when: "'data' in group_names"
  shell: "{{ dashboard.ip.ctrl_script }} stop &>> {{ dashboard.ip.log }}"

- name: stop globus-gridftp-server
  when: "'data' in group_names"
  service:
    name: globus-gridftp-server
    state: stopped